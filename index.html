<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle Miner - Play to Earn</title>
    <style>
        /* CSS كما في النسخة السابقة مع التحسينات */
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
        body { background: linear-gradient(135deg, #1a1c4e 0%, #2a2d72 100%); color:#f5f6fa; min-height:100vh; padding:20px;}
        .container { max-width:1000px; margin:0 auto; background: rgba(30,30,44,0.85); border-radius:20px; padding:20px; box-shadow:0 10px 40px rgba(0,0,0,0.6);}
        header { text-align:center; padding:20px 0; border-bottom:2px solid #ff9f43; margin-bottom:20px;}
        h1 { font-size:2.5rem; color:#ff9f43; text-shadow:2px 2px 5px rgba(0,0,0,0.5); margin-bottom:10px;}
        .subtitle { font-size:1.2rem; color:#00cfc8;}
        .game-container { display:grid; grid-template-columns:1fr 320px; gap:20px; margin-top:20px;}
        .mine-area { background: rgba(42,45,114,0.6); border-radius:15px; padding:20px; text-align:center; position:relative;}
        .mine-shaft { width:220px; height:320px; background: linear-gradient(to bottom, #3a3a3a, #1a1a1a); margin:0 auto; border:4px solid #8c7b6b; border-radius:12px; position:relative; overflow:hidden;}
        .miner { width:40px; height:40px; background:#ff9f43; border-radius:50%; position:absolute; bottom:20px; left:90px; animation: mine 1.5s infinite alternate;}
        @keyframes mine {0% { transform: translateY(0); } 50% { transform: translateY(-15px) scale(0.95); } 100% { transform: translateY(0); }}
        .resources { margin-top:20px; display:flex; justify-content:center; gap:15px; flex-wrap:wrap;}
        .resource { background: rgba(0,207,200,0.2); padding:12px 18px; border-radius:12px; display:flex; align-items:center; gap:8px; font-weight:bold; font-size:1.1rem; transition: transform 0.3s;}
        .resource:hover { transform: scale(1.05); }
        .sidebar { background: rgba(42,45,114,0.6); border-radius:15px; padding:20px; display:flex; flex-direction:column; justify-content:flex-start;}
        .stats { margin-bottom:20px;}
        .stat { display:flex; justify-content:space-between; padding:12px 0; border-bottom:1px solid rgba(255,255,255,0.1);}
        .upgrades { margin-top:20px;}
        .upgrade { background: rgba(0,0,0,0.35); padding:15px; border-radius:12px; margin-bottom:12px; cursor:pointer; transition: all 0.3s;}
        .upgrade:hover { background: rgba(0,0,0,0.55); transform:translateY(-3px); box-shadow:0 6px 15px rgba(0,0,0,0.4);}
        .upgrade-header { display:flex; justify-content:space-between; margin-bottom:6px; font-weight:bold;}
        .btn { background:#ff9f43; color:#1e1e2c; border:none; padding:12px 25px; border-radius:30px; font-weight:bold; cursor:pointer; transition: all 0.3s; display:inline-flex; align-items:center; gap:8px;}
        .btn:hover { background:#ffaa58; transform:translateY(-2px); box-shadow:0 5px 20px rgba(0,0,0,0.3);}
        .action-buttons { display:flex; gap:15px; justify-content:center; margin-top:25px; flex-wrap:wrap;}
        .progress-bar { height:14px; background: rgba(0,0,0,0.25); border-radius:7px; margin:12px 0; overflow:hidden;}
        .progress { height:100%; background:#4cd137; border-radius:7px; width:30%; transition: width 0.5s;}
        .earning-notification { position: fixed; bottom:25px; right:25px; background: rgba(76,209,55,0.95); color:white; padding:12px 25px; border-radius:30px; animation:fadeIn 0.5s; display:none; font-weight:bold;}
        @keyframes fadeIn {from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);}}
        @media(max-width:768px){ .game-container{ grid-template-columns:1fr; } h1{ font-size:2rem; } }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>Idle Miner Tycoon</h1>
        <p class="subtitle">إجمع الثروة واستمتع! Play-to-Earn</p>
    </header>

    <div class="game-container">
        <div class="mine-area">
            <h2>منجم الذهب الرئيسي</h2>
            <div class="mine-shaft"><div class="miner"></div></div>

            <div class="resources">
                <div class="resource"><span>💰</span><span id="gold">1,250</span></div>
                <div class="resource"><span>⛏️</span><span id="miners">3</span></div>
                <div class="resource"><span>📈</span><span id="level">2</span></div>
                <div class="resource"><span>⭐</span><span id="dailyBonus">30%</span></div>
            </div>

            <div class="action-buttons">
                <button class="btn" onclick="collectGold()"><span>⛏️</span> جمع الذهب</button>
                <button class="btn" onclick="buyMiner()"><span>👷</span> شراء عامل (50 ذهب)</button>
                <button class="btn" onclick="dailyBonus()"><span>🎁</span> المطالبة بالمكافأة اليومية</button>
            </div>
        </div>

        <div class="sidebar">
            <div class="stats">
                <h3>إحصائيات اللعبة</h3>
                <div class="stat"><span>الإنتاج/دقيقة:</span> <span id="productionRate">25 ذهب</span></div>
                <div class="stat"><span>العمال النشطين:</span> <span id="activeMiners">3/5</span></div>
                <div class="stat"><span>القيمة اليومية:</span> <span id="dailyValue">125 TOKEN</span></div>
                <div class="stat"><span>المكافآت المجمعة:</span> <span id="tokens">550 TOKEN</span></div>
            </div>

            <div class="progress-bar"><div class="progress" id="progress"></div></div>
            <p id="progressText">التقدم للقبض اليومي: 30%</p>

            <div class="upgrades">
                <h3>ترقيات المتاحة</h3>
                <div class="upgrade" onclick="upgradeEquipment()">
                    <div class="upgrade-header"><span>⛏️ تحسين أداء المعدات</span><span>100 ذهب</span></div>
                    <p>يزيد الإنتاج بمقدار 5 ذهب/دقيقة</p>
                </div>
                <div class="upgrade" onclick="hireManager()">
                    <div class="upgrade-header"><span>👷 توظيف مدير</span><span>200 ذهب</span></div>
                    <p>يزيد الحد الأقصى للعمال بمقدار 3</p>
                </div>
                <div class="upgrade" onclick="unlockDiamondMine()">
                    <div class="upgrade-header"><span>💎 فتح منجم جديد</span><span>500 ذهب</span></div>
                    <p>يفتح منجم ألماس بربح أعلى</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="earning-notification" id="notification">+10 ذهب تم جمعها!</div>

<script>
    // بيانات اللعبة
    let gameData = {
        gold: 1250,
        miners: 3,
        level: 2,
        productionRate: 25,
        tokens: 550,
        dailyProgress: 30,
        activeMiners: 3,
        maxMiners: 5
    };

    function updateUI() {
        document.getElementById('gold').textContent = formatNumber(gameData.gold);
        document.getElementById('miners').textContent = gameData.miners;
        document.getElementById('level').textContent = gameData.level;
        document.getElementById('tokens').textContent = formatNumber(gameData.tokens) + " TOKEN";
        document.getElementById('productionRate').textContent = gameData.productionRate + " ذهب";
        document.getElementById('activeMiners').textContent = `${gameData.activeMiners}/${gameData.maxMiners}`;
        document.getElementById('dailyBonus').textContent = gameData.dailyProgress + "%";
        document.getElementById('progress').style.width = gameData.dailyProgress + "%";
        document.getElementById('progressText').textContent = `التقدم للقبض اليومي: ${gameData.dailyProgress}%`;
    }

    function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function showNotification(msg) {
        const notification = document.getElementById('notification');
        notification.textContent = msg;
        notification.style.display = 'block';
        setTimeout(() => { notification.style.display = 'none'; }, 2000);
    }

    // جمع الذهب
    function collectGold() {
        const collected = 10 + Math.floor(gameData.miners * 2);
        gameData.gold += collected;
        showNotification(`+${collected} ذهب تم جمعها!`);
        updateUI();
    }

    // شراء عامل مع الحد الأقصى
    function
